# Cubox Saver v5.2 æ›´æ–°æ—¥å¿—

## ğŸš€ ç‰ˆæœ¬ä¿¡æ¯
- **ç‰ˆæœ¬å·**: v5.2
- **å‘å¸ƒæ—¥æœŸ**: 2025-01-28
- **æ›´æ–°ç±»å‹**: API å…¼å®¹æ€§å¢å¼º

## ğŸ”§ ä¸»è¦æ›´æ–°

### æ–°å¢åŠŸèƒ½
- âœ… **æ”¯æŒæ–°ç‰ˆ Cubox API æ ¼å¼**
  - å…¼å®¹æ–°æ ¼å¼ï¼š`https://cubox.pro/c/api/save/TOKEN`
  - ä¿æŒæ—§æ ¼å¼æ”¯æŒï¼š`https://cubox.pro/c/api/save_url?token=TOKEN`
  - è‡ªåŠ¨è¯†åˆ« API æ ¼å¼ç±»å‹

### æŠ€æœ¯æ”¹è¿›
- ğŸ” **å¢å¼º URL éªŒè¯é€»è¾‘**
  - æ£€æµ‹ `/c/api/save_url` (æ—§æ ¼å¼)
  - æ£€æµ‹ `/c/api/save/` (æ–°æ ¼å¼)
  - æä¾›æ›´ç²¾ç¡®çš„é”™è¯¯æç¤º

## ğŸ“‹ ä¿®å¤è¯¦æƒ…

### é—®é¢˜æè¿°
ç”¨æˆ·æŠ¥å‘Š "Network error" é”™è¯¯ï¼Œç»åˆ†æå‘ç°æ˜¯å› ä¸º Cubox æ›´æ–°äº† API æ ¼å¼ï¼š
- **æ—§æ ¼å¼**: `https://cubox.pro/c/api/save_url?token=YOUR_TOKEN`
- **æ–°æ ¼å¼**: `https://cubox.pro/c/api/save/YOUR_TOKEN`

### è§£å†³æ–¹æ¡ˆ
```javascript
// v5.1 ä»£ç ï¼ˆä»…æ”¯æŒæ—§æ ¼å¼ï¼‰
if (url.indexOf('cubox.pro') === -1 && url.indexOf('cubox.cc') === -1) {
    popclip.showText('âš ï¸ Invalid Cubox API URL');
    return;
}

// v5.2 ä»£ç ï¼ˆæ”¯æŒæ–°æ—§æ ¼å¼ï¼‰
if (url.indexOf('cubox.pro') === -1 && url.indexOf('cubox.cc') === -1) {
    popclip.showText('âš ï¸ Invalid Cubox API URL');
    return;
}

// éªŒè¯ API è·¯å¾„æ ¼å¼
var isOldFormat = url.indexOf('/c/api/save_url') !== -1;
var isNewFormat = url.indexOf('/c/api/save/') !== -1;
if (!isOldFormat && !isNewFormat) {
    popclip.showText('âš ï¸ Invalid API URL format');
    return;
}
```

## ğŸ¯ æ”¯æŒçš„ API URL æ ¼å¼

### âœ… æ–°æ ¼å¼ï¼ˆæ¨èï¼‰
```
https://cubox.pro/c/api/save/ajqVdgm7qMO
https://cubox.cc/c/api/save/xyz789abc
```

### âœ… æ—§æ ¼å¼ï¼ˆå…¼å®¹ï¼‰
```
https://cubox.pro/c/api/save_url?token=ajqVdgm7qMO
https://cubox.cc/c/api/save_url?token=xyz789abc
```

### âŒ ä¸æ”¯æŒçš„æ ¼å¼
```
https://cubox.pro/api/save/token     # ç¼ºå°‘ /c/ è·¯å¾„
https://cubox.pro/c/save/token       # ç¼ºå°‘ /api/ è·¯å¾„
https://other-domain.com/api/save    # åŸŸåä¸åŒ¹é…
```

## ğŸ”„ ä» v5.1 å‡çº§åˆ° v5.2

### å‡çº§æ­¥éª¤
1. **å¤‡ä»½å½“å‰é…ç½®**ï¼ˆå¯é€‰ï¼‰
2. **åˆ é™¤æ—§ç‰ˆæœ¬**ï¼šåœ¨ PopClip ä¸­ç§»é™¤ Cubox Saver v5.1
3. **å®‰è£…æ–°ç‰ˆæœ¬**ï¼šåŒå‡» `Cubox Saver.popclipext` å®‰è£… v5.2
4. **é‡æ–°é…ç½®**ï¼šè¾“å…¥æ‚¨çš„ Cubox API URLï¼ˆæ–°æ—§æ ¼å¼å‡å¯ï¼‰
5. **æµ‹è¯•åŠŸèƒ½**ï¼šé€‰æ‹©æ–‡æœ¬å¹¶æµ‹è¯•ä¿å­˜åŠŸèƒ½

### é…ç½®éªŒè¯
```bash
# æµ‹è¯•æ–°æ ¼å¼ API
curl -v "https://cubox.pro/c/api/save/YOUR_TOKEN" \
  -X POST \
  -H "Content-Type: application/json" \
  -d '{"type":"memo","content":"test v5.2"}'
```

## ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½ | v5.0 | v5.1 | v5.2 |
|------|------|------|------|
| cubox.cc æ”¯æŒ | âŒ | âœ… | âœ… |
| cubox.pro æ”¯æŒ | âœ… | âœ… | âœ… |
| æ—§ API æ ¼å¼ | âœ… | âœ… | âœ… |
| æ–° API æ ¼å¼ | âŒ | âŒ | âœ… |
| URL æ ¼å¼éªŒè¯ | åŸºç¡€ | å¢å¼º | å®Œæ•´ |

## ğŸ› æ•…éšœæ’é™¤

### å¦‚æœä»ç„¶å‡ºç° "Network error"
1. **æ£€æŸ¥ API URL æ ¼å¼**ï¼šç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ–°æ ¼å¼
2. **éªŒè¯ç½‘ç»œè¿æ¥**ï¼šæµ‹è¯• `curl -I https://cubox.pro`
3. **é‡æ–°è·å– API**ï¼šä» Cubox è®¾ç½®ä¸­é‡æ–°å¤åˆ¶ API URL
4. **æ¸…é™¤ç¼“å­˜**ï¼šé‡æ–°å®‰è£…æ’ä»¶

### å¸¸è§é”™è¯¯ä¿¡æ¯
- `âš ï¸ Invalid Cubox API URL` - åŸŸåä¸æ­£ç¡®
- `âš ï¸ Invalid API URL format` - API è·¯å¾„æ ¼å¼ä¸æ­£ç¡®
- `âŒ Network error` - ç½‘ç»œè¿æ¥é—®é¢˜

## ğŸ“š ç›¸å…³æ–‡æ¡£
- [å®‰è£…å’Œä½¿ç”¨æŒ‡å—](./å®‰è£…å’Œä½¿ç”¨æŒ‡å—.md)
- [æ•…éšœæ’é™¤ - API é…ç½®é”™è¯¯](./æ•…éšœæ’é™¤%20-%20API%20é…ç½®é”™è¯¯.md)
- [Cubox å®˜æ–¹ API æ–‡æ¡£](https://help.cubox.pro/save/89d3/)

---

**æ³¨æ„**: v5.2 å®Œå…¨å‘åå…¼å®¹ï¼Œç°æœ‰çš„æ—§æ ¼å¼ API URL æ— éœ€æ›´æ”¹å³å¯ç»§ç»­ä½¿ç”¨ã€‚