# Cubox PopClip Extension

<div align="center">

![Cubox Logo](https://cubox.cc/favicon.ico)

**ä¸€é”®ä¿å­˜é€‰ä¸­æ–‡æœ¬åˆ° Cubox çš„ PopClip æ‰©å±•**

[![Version](https://img.shields.io/badge/version-v5.4-blue.svg)](https://github.com/duyananbryce/cubox-popclip-extension/releases)
[![PopClip](https://img.shields.io/badge/PopClip-4155+-green.svg)](https://pilotmoon.com/popclip/)
[![License](https://img.shields.io/badge/license-MIT-orange.svg)](LICENSE)

[English](#english) | [ä¸­æ–‡](#ä¸­æ–‡)

</div>

## ä¸­æ–‡

### ğŸ¯ é¡¹ç›®ç®€ä»‹

Cubox PopClip Extension æ˜¯ä¸€ä¸ªä¸“ä¸º macOS PopClip åº”ç”¨è®¾è®¡çš„æ‰©å±•æ’ä»¶ï¼Œè®©æ‚¨èƒ½å¤Ÿä¸€é”®å°†é€‰ä¸­çš„æ–‡æœ¬å¿«é€Ÿä¿å­˜åˆ° Cubox æ”¶è—å·¥å…·ä¸­ã€‚æ— è®ºæ˜¯ç½‘é¡µæ–‡ç« ã€PDF æ–‡æ¡£è¿˜æ˜¯ä»»ä½•åº”ç”¨ä¸­çš„æ–‡æœ¬ï¼Œåªéœ€é€‰ä¸­å³å¯è½»æ¾æ”¶è—ã€‚

### âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸš€ **ä¸€é”®ä¿å­˜**ï¼šé€‰ä¸­æ–‡æœ¬åä¸€é”®ä¿å­˜åˆ° Cubox
- âš™ï¸ **çµæ´»é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰ API URLã€é»˜è®¤æ–‡ä»¶å¤¹å’Œæ ‡ç­¾
- ğŸ“ **æ™ºèƒ½æ ‡é¢˜**ï¼šè‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜ï¼ˆå–æ–‡æœ¬é¦–è¡Œæˆ–å‰50ä¸ªå­—ç¬¦ï¼‰
- âœ… **å®æ—¶åé¦ˆ**ï¼šä¿å­˜æˆåŠŸ/å¤±è´¥å³æ—¶æç¤º
- ğŸ”’ **å®‰å…¨å¯é **ï¼šä½¿ç”¨å®˜æ–¹ Cubox APIï¼Œæ•°æ®ä¼ è¾“å®‰å…¨
- ğŸŒ **åŒåŸŸåæ”¯æŒ**ï¼šåŒæ—¶æ”¯æŒ cubox.pro å’Œ cubox.cc
- ğŸ“± **å¼‚æ­¥å¤„ç†**ï¼šä¸é˜»å¡ç•Œé¢æ“ä½œï¼Œç”¨æˆ·ä½“éªŒæµç•…

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**ï¼šmacOS
- **PopClip ç‰ˆæœ¬**ï¼š4155 æˆ–æ›´é«˜
- **Cubox è´¦æˆ·**ï¼šéœ€è¦é«˜çº§ç‰ˆæœ¬è·å¾— API è®¿é—®æƒé™

### åŠŸèƒ½æ¼”ç¤º

![æ¼”ç¤º](https://github.com/user-attachments/assets/8fa918bb-8e12-4317-8087-978bebca4527)



### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. ä¸‹è½½å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/duyananbryce/cubox-popclip-extension.git

# è¿›å…¥ç›®å½•
cd cubox-popclip-extension

# åŒå‡»å®‰è£…
open "Cubox Saver.popclipext"
```

æˆ–è€…ç›´æ¥ä¸‹è½½ [æœ€æ–°ç‰ˆæœ¬](https://github.com/duyananbryce/cubox-popclip-extension/releases) å¹¶åŒå‡» `Cubox Saver.popclipext` æ–‡ä»¶å®‰è£…ã€‚

#### 2. è·å– Cubox API URL

**æ”¯æŒçš„ Cubox ç½‘ç«™**ï¼š
- æ–°ç‰ˆæœ¬ï¼š[https://cubox.pro](https://cubox.pro) ï¼ˆæ¨èï¼‰
- æ—§ç‰ˆæœ¬ï¼š[https://cubox.cc](https://cubox.cc)

**è·å–æ­¥éª¤**ï¼š
1. è®¿é—®å¯¹åº”çš„ Cubox ç½‘é¡µç‰ˆå¹¶ç™»å½•
2. è¿›å…¥ **è®¾ç½®** > **æ‰©å±•ä¸è‡ªåŠ¨åŒ–** > **API æ‰©å±•**
3. ç‚¹å‡» **å¯ç”¨ API** æŒ‰é’®
4. å¤åˆ¶ç”Ÿæˆçš„å®Œæ•´ API é“¾æ¥

**æ­£ç¡®çš„ API URL æ ¼å¼**ï¼š
```
âœ… https://cubox.pro/c/api/save/YOUR_TOKEN
âœ… https://cubox.cc/c/api/save_url?token=YOUR_TOKEN
âœ… https://cubox.pro/c/api/save_url?token=YOUR_TOKEN
```

#### 3. é…ç½®æ’ä»¶

1. æ‰“å¼€ PopClip è®¾ç½®
2. æ‰¾åˆ° "Cubox" æ‰©å±•
3. é…ç½®ä»¥ä¸‹é€‰é¡¹ï¼š

| é…ç½®é¡¹ | è¯´æ˜ | å¿…éœ€ |
|--------|------|------|
| **Cubox API URL** | ä» Cubox è·å–çš„ API é“¾æ¥ | âœ… å¿…éœ€ |
| **Default Folder** | é»˜è®¤ä¿å­˜æ–‡ä»¶å¤¹ï¼ˆç•™ç©ºä¿å­˜åˆ°æ”¶ä»¶ç®±ï¼‰ | âŒ å¯é€‰ |
| **Default Tag** | é»˜è®¤æ ‡ç­¾ï¼ˆé»˜è®¤ä¸º "PopClip"ï¼‰ | âŒ å¯é€‰ |

### ğŸ“– ä½¿ç”¨æ–¹æ³•

1. **é€‰ä¸­æ–‡æœ¬**ï¼šåœ¨ä»»æ„åº”ç”¨ä¸­é€‰ä¸­æ‚¨æƒ³è¦ä¿å­˜çš„æ–‡æœ¬
2. **ç‚¹å‡»ä¿å­˜**ï¼šåœ¨ PopClip å¼¹å‡ºçš„æ“ä½œæ ä¸­ç‚¹å‡» "Save to Cubox" æŒ‰é’®
3. **æŸ¥çœ‹ç»“æœ**ï¼šæ’ä»¶ä¼šæ˜¾ç¤ºä¿å­˜æˆåŠŸæˆ–å¤±è´¥çš„æç¤º

### ğŸ”„ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | å‘å¸ƒæ—¥æœŸ | ä¸»è¦æ›´æ–° |
|------|----------|----------|
| **v5.4** | 2025-08-29 | ğŸ”§ æ·»åŠ ç½‘ç»œæƒé™é…ç½®ï¼Œä¿®å¤ XMLHttpRequest æƒé™é”™è¯¯ |
| **v5.3** | 2025-08-28 | ğŸš€ æ”¹ä¸ºå¼‚æ­¥è¯·æ±‚ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œç¨³å®šæ€§ |
| **v5.2** | 2025-08-27 | ğŸŒ æ”¯æŒæ–° API æ ¼å¼ `/c/api/save/TOKEN` |
| **v5.1** | 2025-08-26 | ğŸ”— æ·»åŠ  cubox.pro åŸŸåæ”¯æŒ |
| **v5.0** | 2025-08-25 | ğŸ“ ä¿®å¤ PopClip æ ‡å‡†æ ¼å¼å…¼å®¹æ€§ |
| **v4.x** | 2025-07-15 | ğŸ› å¤šä¸ª bug ä¿®å¤å’ŒåŠŸèƒ½ä¼˜åŒ– |
| **v1.0** | 2025-06-20 | ğŸ‰ é¦–æ¬¡å‘å¸ƒ |

### ğŸ”§ æ•…éšœæ’é™¤

#### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|----------|------|----------|
| "Please set your Cubox API URL" | æœªé…ç½® API URL | åœ¨æ’ä»¶è®¾ç½®ä¸­æ·»åŠ  Cubox API URL |
| "No text selected" | æœªé€‰ä¸­æ–‡æœ¬ | è¯·å…ˆé€‰ä¸­ä¸€äº›æ–‡æœ¬å†ä½¿ç”¨æ’ä»¶ |
| "Invalid API URL format" | API URL æ ¼å¼é”™è¯¯ | æ£€æŸ¥ URL æ˜¯å¦åŒ…å«æ­£ç¡®çš„åŸŸåå’Œè·¯å¾„ |
| "Authentication failed" | API è®¤è¯å¤±è´¥ | æ£€æŸ¥ API URL ä¸­çš„ token æ˜¯å¦æ­£ç¡® |
| "Network error" | ç½‘ç»œè¿æ¥é—®é¢˜ | æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯• |
| "Using XMLHttpRequest requires the 'network' entitlement" | ç¼ºå°‘ç½‘ç»œæƒé™ | å‡çº§åˆ° v5.4 æˆ–æ›´é«˜ç‰ˆæœ¬ |

#### è°ƒè¯•æ­¥éª¤

1. **éªŒè¯ API URL**ï¼š
   ```bash
   curl -X POST "YOUR_API_URL" \
        -H "Content-Type: application/json" \
        -d '{"type":"memo","content":"æµ‹è¯•æ–‡æœ¬","title":"æµ‹è¯•"}'
   ```

2. **æ£€æŸ¥ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿èƒ½æ­£å¸¸è®¿é—® Cubox ç½‘ç«™

3. **é‡æ–°å®‰è£…æ’ä»¶**ï¼šåˆ é™¤æ—§ç‰ˆæœ¬åé‡æ–°å®‰è£…

### ğŸ› ï¸ æŠ€æœ¯æ¶æ„

#### æ ¸å¿ƒæ–‡ä»¶ç»“æ„

```
Cubox Saver.popclipext/
â”œâ”€â”€ Config.json          # æ’ä»¶é…ç½®å’Œå…ƒæ•°æ®
â”œâ”€â”€ action.js           # æ ¸å¿ƒé€»è¾‘å®ç°
â”œâ”€â”€ icon.svg            # æ’ä»¶å›¾æ ‡
â””â”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
```

#### æŠ€æœ¯ç‰¹æ€§

- **å¼‚æ­¥ç½‘ç»œè¯·æ±‚**ï¼šä½¿ç”¨ XMLHttpRequest å¼‚æ­¥æ¨¡å¼ï¼Œä¸é˜»å¡ UI
- **é”™è¯¯å¤„ç†æœºåˆ¶**ï¼šå®Œå–„çš„é”™è¯¯æ•è·å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- **API å…¼å®¹æ€§**ï¼šæ”¯æŒæ–°æ—§ä¸¤ç§ API æ ¼å¼
- **åŸŸåçµæ´»æ€§**ï¼šè‡ªåŠ¨è¯†åˆ« cubox.pro å’Œ cubox.cc åŸŸå
- **æ•°æ®éªŒè¯**ï¼šä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œ URL æ ¼å¼æ£€æŸ¥

### ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤ Pull Request

### ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

### ğŸ™ è‡´è°¢

- [PopClip](https://pilotmoon.com/popclip/) - ä¼˜ç§€çš„ macOS æ–‡æœ¬æ“ä½œå·¥å…·
- [Cubox](https://cubox.cc) - å¼ºå¤§çš„æ”¶è—å’ŒçŸ¥è¯†ç®¡ç†å·¥å…·
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„åé¦ˆ

---

## English

### ğŸ¯ Project Overview

Cubox PopClip Extension is a powerful extension designed for macOS PopClip application, enabling you to save selected text to Cubox with just one click. Whether it's web articles, PDF documents, or text from any application, you can easily collect them.

### âœ¨ Features

- ğŸš€ **One-Click Save**: Save selected text to Cubox instantly
- âš™ï¸ **Flexible Configuration**: Customizable API URL, default folder, and tags
- ğŸ“ **Smart Titles**: Auto-generate titles from first line or first 50 characters
- âœ… **Real-time Feedback**: Instant success/failure notifications
- ğŸ”’ **Secure & Reliable**: Uses official Cubox API with secure data transmission
- ğŸŒ **Dual Domain Support**: Supports both cubox.pro and cubox.cc
- ğŸ“± **Asynchronous Processing**: Non-blocking UI operations for smooth user experience

### ğŸ“‹ Requirements

- **OS**: macOS
- **PopClip Version**: 4155 or higher
- **Cubox Account**: Premium version required for API access

### ğŸš€ Quick Start

#### 1. Installation

```bash
# Clone repository
git clone https://github.com/duyananbryce/cubox-popclip-extension.git

# Enter directory
cd cubox-popclip-extension

# Install by double-clicking
open "Cubox Saver.popclipext"
```

Or download the [latest release](https://github.com/duyananbryce/cubox-popclip-extension/releases) and double-click the `Cubox Saver.popclipext` file.

#### 2. Get Cubox API URL

**Supported Cubox Websites**:
- New version: [https://cubox.pro](https://cubox.pro) (Recommended)
- Legacy version: [https://cubox.cc](https://cubox.cc)

**Steps**:
1. Visit the corresponding Cubox website and log in
2. Go to **Settings** > **Extensions & Automation** > **API Extension**
3. Click **Enable API** button
4. Copy the generated complete API link

#### 3. Configure Extension

1. Open PopClip settings
2. Find "Cubox" extension
3. Configure the following options:

| Option | Description | Required |
|--------|-------------|----------|
| **Cubox API URL** | API link from Cubox | âœ… Required |
| **Default Folder** | Default save folder (empty for inbox) | âŒ Optional |
| **Default Tag** | Default tag (defaults to "PopClip") | âŒ Optional |

### ğŸ“– Usage

1. **Select Text**: Select the text you want to save in any application
2. **Click Save**: Click "Save to Cubox" button in PopClip's action bar
3. **View Result**: The extension will show success or failure notification

### ğŸ”„ Version History

| Version | Release Date | Key Updates |
|---------|--------------|-------------|
| **v5.4** | 2024-01 | ğŸ”§ Added network entitlement, fixed XMLHttpRequest permission error |
| **v5.3** | 2024-01 | ğŸš€ Switched to asynchronous requests for better UX and stability |
| **v5.2** | 2024-01 | ğŸŒ Support for new API format `/c/api/save/TOKEN` |
| **v5.1** | 2024-01 | ğŸ”— Added cubox.pro domain support |
| **v5.0** | 2024-01 | ğŸ“ Fixed PopClip standard format compatibility |
| **v4.x** | 2023-12 | ğŸ› Multiple bug fixes and optimizations |
| **v1.0** | 2023-11 | ğŸ‰ Initial release |

### ğŸ”§ Troubleshooting

#### Common Errors and Solutions

| Error Message | Cause | Solution |
|---------------|-------|----------|
| "Please set your Cubox API URL" | API URL not configured | Add Cubox API URL in extension settings |
| "No text selected" | No text selected | Select some text before using the extension |
| "Invalid API URL format" | Incorrect API URL format | Check if URL contains correct domain and path |
| "Authentication failed" | API authentication failed | Verify the token in API URL is correct |
| "Network error" | Network connection issue | Check network connection or retry later |
| "Using XMLHttpRequest requires the 'network' entitlement" | Missing network permission | Upgrade to v5.4 or higher |

### ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit Issues and Pull Requests.

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Submit a Pull Request

### ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

### ğŸ™ Acknowledgments

- [PopClip](https://pilotmoon.com/popclip/) - Excellent macOS text manipulation tool
- [Cubox](https://cubox.cc) - Powerful collection and knowledge management tool
- All contributors and users for their feedback

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ Starï¼**

**If this project helps you, please give it a â­ï¸ Star!**

</div>
