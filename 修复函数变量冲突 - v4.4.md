# Cubox Saver v4.4 - ä¿®å¤å‡½æ•°å˜é‡å†²çªé”™è¯¯

## é—®é¢˜æè¿°

åœ¨ v4.3 ç‰ˆæœ¬ä¸­ï¼Œå°½ç®¡å®šä¹‰äº† `function action()`ï¼Œä½† PopClip ä»ç„¶æŠ¥å‘Šï¼š
```
ReferenceError: Can't find variable: action
```

## é”™è¯¯åˆ†æ

### æ ¹æœ¬åŸå› ï¼šJavaScript å‡½æ•°ä¸å˜é‡å†²çª
åœ¨ v4.3 çš„ä»£ç ä¸­å­˜åœ¨ä»¥ä¸‹å†²çªï¼š
```javascript
// ç¬¬ 68 è¡Œï¼šå‡½æ•°å£°æ˜
function action(selection, settings) {
    return main(selection, settings);
}

// ç¬¬ 79 è¡Œï¼šå˜é‡å£°æ˜ï¼ˆé—®é¢˜æ‰€åœ¨ï¼‰
var action = main;
```

### æŠ€æœ¯ç»†èŠ‚
- **å˜é‡æå‡ä¼˜å…ˆçº§**ï¼šåœ¨ JavaScript ä¸­ï¼Œ`var` å£°æ˜ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨
- **å‡½æ•°è¦†ç›–**ï¼šå˜é‡å£°æ˜ `var action` ä¼šè¦†ç›–å‡½æ•°å£°æ˜ `function action`
- **èµ‹å€¼æ—¶æœº**ï¼š`var action = main;` çš„èµ‹å€¼å‘ç”Ÿåœ¨å‡½æ•°å£°æ˜ä¹‹åï¼Œå¯¼è‡´å‡½æ•°è¢«å˜é‡è¦†ç›–
- **PopClip è°ƒç”¨æ—¶æœº**ï¼šPopClip å¯èƒ½åœ¨å˜é‡èµ‹å€¼ä¹‹å‰å°±å°è¯•è°ƒç”¨ `action` å‡½æ•°

### å†²çªç¤ºä¾‹
```javascript
// JavaScript å¼•æ“å®é™…æ‰§è¡Œé¡ºåºï¼š
var action; // å˜é‡å£°æ˜è¢«æå‡ï¼Œè¦†ç›–å‡½æ•°
function action() { ... } // å‡½æ•°å£°æ˜
// ... å…¶ä»–ä»£ç  ...
action = main; // å˜é‡èµ‹å€¼
```

ç»“æœï¼š`action` åœ¨èµ‹å€¼å‰æ˜¯ `undefined`ï¼Œå¯¼è‡´ "Can't find variable" é”™è¯¯ã€‚

## v4.4 è§£å†³æ–¹æ¡ˆ

### æ ¸å¿ƒä¿®å¤
**åˆ é™¤å†²çªçš„å˜é‡å£°æ˜**ï¼š
```javascript
// åˆ é™¤è¿™è¡Œä»£ç 
// var action = main;

// åªä¿ç•™å‡½æ•°å£°æ˜
function action(selection, settings) {
    return main(selection, settings);
}
```

### å››é‡å…¼å®¹æ€§è®¾è®¡
v4.4 ç°åœ¨ä½¿ç”¨æ¸…æ™°çš„å…¼å®¹æ€§ç­–ç•¥ï¼š
1. **`function action()`** - ç›´æ¥å‡½æ•°å®šä¹‰ï¼ˆä¸»è¦æ–¹å¼ï¼‰
2. **`exports.action`** - ç°ä»£ PopClip ç‰ˆæœ¬
3. **`main` å‡½æ•°** - ä¼ ç»Ÿ PopClip ç‰ˆæœ¬
4. **å…¨å±€ `action`** - å…¨å±€ä½œç”¨åŸŸä¸­çš„ action å‡½æ•°

### ä»£ç ç»“æ„
```javascript
// ä¸»å‡½æ•°
function main(selection, settings) { ... }

// ç›´æ¥å‡½æ•°å®šä¹‰ï¼ˆæ— å†²çªï¼‰
function action(selection, settings) {
    return main(selection, settings);
}

// ç°ä»£ç‰ˆæœ¬å¯¼å‡º
exports.action = main;

// ä¼ ç»Ÿç‰ˆæœ¬æ”¯æŒ
if (typeof exports === 'undefined') {
    this.main = main;
}

// å…¨å±€å‡½æ•°æ”¯æŒ
if (typeof window !== 'undefined') {
    window.action = main;
} else if (typeof global !== 'undefined') {
    global.action = main;
} else {
    this.action = main;
}
```

## å‡çº§è¯´æ˜

### å®‰è£…æ­¥éª¤
1. **å®Œå…¨å¸è½½æ—§ç‰ˆæœ¬**
   - åˆ é™¤æ‰€æœ‰ "Cubox Saver" ç›¸å…³çš„ PopClip æ‰©å±•
   - é‡å¯ PopClip åº”ç”¨

2. **å®‰è£… v4.4**
   - åŒå‡» `Cubox Saver.popclipext` æ–‡ä»¶
   - åœ¨ PopClip ä¸­ç¡®è®¤å®‰è£…

3. **éªŒè¯ç‰ˆæœ¬**
   - åœ¨ PopClip æ‰©å±•åˆ—è¡¨ä¸­ç¡®è®¤æ˜¾ç¤º "Cubox Saver v4.4"
   - æµ‹è¯•é€‰æ‹©æ–‡æœ¬å¹¶ä½¿ç”¨æ‰©å±•

### éªŒè¯æ­¥éª¤
1. é€‰æ‹©ä»»æ„æ–‡æœ¬
2. ç‚¹å‡» PopClip ä¸­çš„ Cubox Saver å›¾æ ‡
3. åº”è¯¥çœ‹åˆ° "ğŸ“‹ Saving to Cubox..." è€Œä¸æ˜¯é”™è¯¯ä¿¡æ¯

## æŠ€æœ¯è¯´æ˜

### JavaScript å˜é‡æå‡è§„åˆ™
```javascript
// åŸå§‹ä»£ç 
function action() { ... }
var action = main;

// JavaScript å¼•æ“å¤„ç†åçš„ç­‰æ•ˆä»£ç 
var action; // undefined
function action() { ... } // è¢« var è¦†ç›–
action = main; // èµ‹å€¼
```

### ä¸ºä»€ä¹ˆåˆ é™¤ var å£°æ˜ï¼Ÿ
- **é¿å…æå‡å†²çª**ï¼š`var` å£°æ˜ä¼šè¢«æå‡å¹¶è¦†ç›–å‡½æ•°å£°æ˜
- **ä¿æŒå‡½æ•°å®Œæ•´æ€§**ï¼š`function action()` å¯ä»¥åœ¨ä»»ä½•ä½ç½®è¢«è°ƒç”¨
- **ç®€åŒ–å…¼å®¹æ€§**ï¼šå‡å°‘ä¸å¿…è¦çš„å¤æ‚æ€§
- **æé«˜å¯é æ€§**ï¼šé¿å…æ—¶åºç›¸å…³çš„é”™è¯¯

### å…¼å®¹æ€§ä¿éšœ
å³ä½¿åˆ é™¤äº† `var action`ï¼Œv4.4 ä»ç„¶é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¿è¯å…¼å®¹æ€§ï¼š
- ç›´æ¥å‡½æ•°å®šä¹‰ï¼š`function action()`
- å…¨å±€å‡½æ•°èµ‹å€¼ï¼š`window.action = main` ç­‰
- å¯¼å‡ºæœºåˆ¶ï¼š`exports.action = main`

## æ•…éšœæ’é™¤

### å¦‚æœä»ç„¶å‡ºç°é”™è¯¯
1. **æ£€æŸ¥å®‰è£…**ï¼šç¡®ä¿å®Œå…¨å¸è½½äº†æ—§ç‰ˆæœ¬
2. **é‡å¯ PopClip**ï¼šå®Œå…¨é€€å‡ºå¹¶é‡æ–°å¯åŠ¨ PopClip
3. **æ¸…é™¤ç¼“å­˜**ï¼šåˆ é™¤ PopClip ç¼“å­˜æ–‡ä»¶
4. **æ£€æŸ¥æƒé™**ï¼šç¡®ä¿ PopClip æœ‰å¿…è¦çš„ç³»ç»Ÿæƒé™

### æ—¥å¿—æ£€æŸ¥
åœ¨ PopClip çš„è°ƒè¯•æ—¥å¿—ä¸­ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
[Cubox Saver v4.4] performing action 'Save to Cubox' with input text of length X
```
è€Œä¸æ˜¯ `ReferenceError` é”™è¯¯ã€‚

## ç‰ˆæœ¬å†å²
- **v4.0**: ä¿®å¤ "Can't find variable: cubox" é”™è¯¯
- **v4.1**: ä¿®å¤ "Can't find variable: main" é”™è¯¯
- **v4.2**: ä¿®å¤ "Can't find variable: action" é”™è¯¯ï¼ˆå˜é‡æ–¹å¼ï¼‰
- **v4.3**: ä¿®å¤ "Can't find variable: action" é”™è¯¯ï¼ˆå‡½æ•°æ–¹å¼ï¼‰
- **v4.4**: ä¿®å¤å‡½æ•°ä¸å˜é‡å†²çªé”™è¯¯ï¼ˆåˆ é™¤å†²çªçš„ var å£°æ˜ï¼‰

---

**æ³¨æ„**ï¼šv4.4 é€šè¿‡è§£å†³ JavaScript å‡½æ•°ä¸å˜é‡çš„å†²çªé—®é¢˜ï¼Œæä¾›äº†æœ€ç¨³å®šçš„å…¼å®¹æ€§è§£å†³æ–¹æ¡ˆã€‚